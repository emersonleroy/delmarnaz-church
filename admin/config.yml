# ============================================
# DECAP CMS CONFIGURATION
# Delmar Church of Nazarene
# ============================================
# This file configures the content management system
# for editing events, sermons, announcements, and staff.
# ============================================

# Backend Configuration
backend:
  name: git-gateway
  branch: main
  commit_messages:
    create: 'Create {{collection}} "{{slug}}"'
    update: 'Update {{collection}} "{{slug}}"'
    delete: 'Delete {{collection}} "{{slug}}"'
    uploadMedia: 'Upload "{{path}}"'
    deleteMedia: 'Delete "{{path}}"'

# Editorial Workflow (Draft → Review → Publish)
publish_mode: editorial_workflow

# Site Configuration
site_url: https://delmarnaz.netlify.app
display_url: https://delmarnaz.netlify.app
logo_url: /assets/images/church-logo.png

# Media/Image Settings
media_folder: "images/uploads"
public_folder: "/images/uploads"

# Slug (URL) Configuration
slug:
  encoding: "ascii"
  clean_accents: true
  sanitize_replacement: "-"

# ============================================
# COLLECTIONS
# ============================================

collections:

  # ==========================================
  # EVENTS COLLECTION
  # ==========================================
  - name: "events"
    label: "Events"
    label_singular: "Event"
    description: "Church events, activities, and gatherings. Add upcoming events here."
    folder: "content/events/en"
    create: true
    slug: "{{slug}}"
    summary: "{{title}} - {{date | date('MMM D, YYYY')}}"
    sortable_fields: ['date', 'title']
    view_filters:
      - label: "Upcoming Events"
        field: date
        pattern: "2024|2025|2026"
    view_groups:
      - label: "Year"
        field: date
        pattern: '\d{4}'
    fields:
      - label: "Event Name"
        name: "title"
        widget: "string"
        required: true
        hint: "The name of the event (e.g., 'Easter Sunday Service', 'Youth Lock-In')"

      - label: "Event Date & Start Time"
        name: "date"
        widget: "datetime"
        required: true
        date_format: "MMMM D, YYYY"
        time_format: "h:mm A"
        hint: "When does the event start?"

      - label: "End Date & Time"
        name: "end_date"
        widget: "datetime"
        required: false
        date_format: "MMMM D, YYYY"
        time_format: "h:mm A"
        hint: "Optional: When does the event end? Leave blank for single-time events."

      - label: "Time Display"
        name: "time_display"
        widget: "string"
        required: false
        hint: "Optional: Custom time display (e.g., '6:00 PM - 8:00 PM' or 'All Day')"

      - label: "Location"
        name: "location"
        widget: "string"
        default: "Delmar Church of Nazarene"
        required: true
        hint: "Where is the event? Use church name or specific address."

      - label: "Featured Image"
        name: "image"
        widget: "image"
        required: false
        allow_multiple: false
        hint: "Optional: Add an image for this event (recommended size: 1200x630px)"

      - label: "Description"
        name: "description"
        widget: "markdown"
        required: true
        hint: "Describe the event. What should attendees know? What to bring?"

      - label: "Registration Link"
        name: "registration_url"
        widget: "string"
        required: false
        hint: "Optional: Link to registration form or signup page"

      - label: "Contact Person"
        name: "contact_person"
        widget: "string"
        default: "Church Office"
        required: false
        hint: "Who should people contact for more info?"

      - label: "Contact Email"
        name: "contact_email"
        widget: "string"
        default: "office@delmarnaz.com"
        required: false
        pattern: ['^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$', 'Please enter a valid email address']
        hint: "Email address for questions about this event"

      - label: "Featured Event"
        name: "featured"
        widget: "boolean"
        default: false
        hint: "Feature this event prominently on the homepage?"

  # ==========================================
  # SERMONS COLLECTION
  # ==========================================
  - name: "sermons"
    label: "Sermons"
    label_singular: "Sermon"
    description: "Weekly sermons and messages. Add sermon recordings and notes here."
    folder: "content/sermons/en"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    summary: "{{title}} - {{speaker}} ({{date | date('MMM D, YYYY')}})"
    sortable_fields: ['date', 'title', 'speaker']
    view_filters:
      - label: "Pastor Charles"
        field: speaker
        pattern: "Pastor Charles Leroy"
    view_groups:
      - label: "Series"
        field: series
      - label: "Speaker"
        field: speaker
    fields:
      - label: "Sermon Title"
        name: "title"
        widget: "string"
        required: true
        hint: "The title of the sermon message"

      - label: "Date Preached"
        name: "date"
        widget: "datetime"
        required: true
        date_format: "MMMM D, YYYY"
        time_format: false
        hint: "When was this sermon delivered?"

      - label: "Speaker"
        name: "speaker"
        widget: "string"
        default: "Pastor Charles Leroy"
        required: true
        hint: "Who delivered this message?"

      - label: "Scripture Reference"
        name: "scripture"
        widget: "string"
        required: false
        hint: "Main scripture passage (e.g., 'John 3:16-21' or 'Psalm 23')"

      - label: "Sermon Series"
        name: "series"
        widget: "string"
        required: false
        hint: "Optional: Is this part of a sermon series? Enter the series name."

      - label: "YouTube Video URL"
        name: "youtube_url"
        widget: "string"
        required: true
        pattern: ['^https?:\/\/(www\.)?(youtube\.com|youtu\.be)\/.+$', 'Please enter a valid YouTube URL']
        hint: "Full YouTube URL (e.g., https://www.youtube.com/watch?v=xxxxx)"

      - label: "Description"
        name: "description"
        widget: "text"
        required: true
        hint: "Brief summary of the sermon (2-3 sentences)"

      - label: "Audio URL"
        name: "audio_url"
        widget: "string"
        required: false
        hint: "Optional: Direct link to audio file (MP3) if available"

      - label: "Sermon Notes & Resources"
        name: "notes"
        widget: "markdown"
        required: false
        hint: "Optional: Sermon outline, discussion questions, or additional resources"

      - label: "Thumbnail Image"
        name: "thumbnail"
        widget: "image"
        required: false
        hint: "Optional: Custom thumbnail (otherwise YouTube thumbnail will be used)"

  # ==========================================
  # ANNOUNCEMENTS COLLECTION
  # ==========================================
  - name: "announcements"
    label: "Announcements"
    label_singular: "Announcement"
    description: "Church announcements and updates. These can be displayed on the homepage or announcement pages."
    folder: "content/announcements/en"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    summary: "{{title}} ({{priority}}) - {{date | date('MMM D, YYYY')}}"
    sortable_fields: ['date', 'priority', 'title']
    view_filters:
      - label: "High Priority"
        field: priority
        pattern: "high"
      - label: "Church-wide"
        field: category
        pattern: "church-wide"
    view_groups:
      - label: "Priority"
        field: priority
      - label: "Category"
        field: category
    fields:
      - label: "Announcement Title"
        name: "title"
        widget: "string"
        required: true
        hint: "Clear, attention-grabbing title for the announcement"

      - label: "Date Posted"
        name: "date"
        widget: "datetime"
        required: true
        date_format: "MMMM D, YYYY"
        time_format: false
        hint: "When is this announcement being posted?"

      - label: "Priority Level"
        name: "priority"
        widget: "select"
        options:
          - { label: "High - Urgent/Important", value: "high" }
          - { label: "Normal - Regular announcement", value: "normal" }
          - { label: "Low - FYI only", value: "low" }
        default: "normal"
        required: true
        hint: "High priority announcements may be featured more prominently"

      - label: "Display Until"
        name: "display_until"
        widget: "datetime"
        required: false
        date_format: "MMMM D, YYYY"
        time_format: false
        hint: "Optional: When should this announcement stop displaying? Leave blank to show indefinitely."

      - label: "Category"
        name: "category"
        widget: "select"
        options:
          - { label: "Church-wide", value: "church-wide" }
          - { label: "Ministry Update", value: "ministry" }
          - { label: "Event Related", value: "event" }
          - { label: "Prayer Request", value: "prayer" }
          - { label: "Other", value: "other" }
        default: "church-wide"
        required: true
        hint: "What type of announcement is this?"

      - label: "Content"
        name: "content"
        widget: "markdown"
        required: true
        hint: "The full announcement content. Be clear and include all relevant details."

      - label: "More Info Link"
        name: "link"
        widget: "string"
        required: false
        hint: "Optional: Link to more information, signup form, or related page"

      - label: "Link Text"
        name: "link_text"
        widget: "string"
        required: false
        default: "Learn More"
        hint: "Text to display for the link button"

      - label: "Image"
        name: "image"
        widget: "image"
        required: false
        hint: "Optional: Add an image to make the announcement more eye-catching"

  # ==========================================
  # STAFF & LEADERSHIP COLLECTION
  # ==========================================
  - name: "staff"
    label: "Staff & Leadership"
    label_singular: "Staff Member"
    description: "Church staff and leadership team. These profiles appear on the Staff page."
    folder: "content/staff/en"
    create: true
    slug: "{{slug}}"
    summary: "{{name}} - {{position}}"
    sortable_fields: ['display_order', 'name', 'staff_type']
    view_groups:
      - label: "Staff Type"
        field: staff_type
    fields:
      - label: "Full Name"
        name: "name"
        widget: "string"
        required: true
        hint: "Staff member's full name"

      - label: "Title/Position"
        name: "position"
        widget: "string"
        required: true
        hint: "Their role at the church (e.g., 'Senior Pastor', 'Youth Director')"

      - label: "Staff Type"
        name: "staff_type"
        widget: "select"
        options:
          - { label: "Senior Pastor", value: "senior-pastor" }
          - { label: "Associate Pastor", value: "associate-pastor" }
          - { label: "Worship Leader", value: "worship-leader" }
          - { label: "Ministry Director", value: "ministry-director" }
          - { label: "Office Staff", value: "office-staff" }
          - { label: "Board Member", value: "board-member" }
          - { label: "Other", value: "other" }
        default: "other"
        required: true
        hint: "Category for organizing staff on the page"

      - label: "Photo"
        name: "photo"
        widget: "image"
        required: true
        hint: "Professional headshot photo (recommended: square, at least 400x400px)"

      - label: "Email Address"
        name: "email"
        widget: "string"
        required: false
        pattern: ['^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$', 'Please enter a valid email address']
        hint: "Optional: Public email for this staff member"

      - label: "Phone Number"
        name: "phone"
        widget: "string"
        required: false
        hint: "Optional: Contact phone number"

      - label: "Biography"
        name: "bio"
        widget: "markdown"
        required: true
        hint: "Brief biography - background, family, passions, how long at the church, etc."

      - label: "Display Order"
        name: "display_order"
        widget: "number"
        default: 10
        value_type: "int"
        min: 1
        max: 100
        hint: "Order on the staff page (lower numbers appear first). Senior Pastor = 1, etc."

      - label: "Show on Homepage"
        name: "show_on_homepage"
        widget: "boolean"
        default: false
        hint: "Feature this staff member on the homepage?"

# ============================================
# END OF CONFIGURATION
# ============================================
